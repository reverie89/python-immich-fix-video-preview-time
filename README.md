# python-immich-fix-video-preview-time

```
I wrote this script with the help from CodeGPT Plus (GPT-4)

Tested on Python 3.12.1

Following description is generated by the AI chatbot (with a few format adjustments)
```

The provided code connects to a PostgreSQL database and updates the "duration" field of video files present in a specified root directory. The duration is obtained using FFprobe, a multimedia stream analysis tool, and then stored in the PostgreSQL database table "assets". The code ensures that only one row is retrieved for each video file, and then updates the duration field accordingly.

To run the code, make sure to install the psycopg2 package by running `pip install psycopg2`. Additionally, update the following variables in the code:

ffprobe_path: Set the path to the ffprobe executable.
PostgreSQL connection details: Update the database, user, password, host, and port variables with your own PostgreSQL connection details.
root_directory: Specify the root directory of the video files to update.
Finally, execute the code with the root directory as the command-line argument. For example:

`python app.py "path/to/root/directory"`